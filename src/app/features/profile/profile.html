<div class="max-w-2xl mx-auto">
  <h1 class="text-2xl font-bold text-gray-900 mb-6">O Meu Perfil</h1>

  <!-- Success -->
  @if (success()) {
    <div class="mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm">
      Perfil atualizado com sucesso!
    </div>
  }

  <!-- Error -->
  @if (error()) {
    <div class="mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
      {{ error() }}
    </div>
  }

  <form (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Personal Info -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">Informacao Pessoal</h2>

      <div class="space-y-4">
        <div>
          <label for="fullName" class="block text-sm font-medium text-gray-700">Nome completo</label>
          <input id="fullName" type="text" required
            [ngModel]="fullName()" (ngModelChange)="fullName.set($event)" name="fullName"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
        </div>

        <div>
          <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
          <input id="email" type="email" disabled
            [value]="auth.profile()?.email || ''"
            class="mt-1 block w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-500 sm:text-sm" />
          <p class="mt-1 text-xs text-gray-400">O email nao pode ser alterado.</p>
        </div>

        <div>
          <label for="phone" class="block text-sm font-medium text-gray-700">Telefone</label>
          <input id="phone" type="tel"
            [ngModel]="phone()" (ngModelChange)="phone.set($event)" name="phone"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
            placeholder="+351 912 345 678" />
        </div>
      </div>
    </div>

    <!-- Player Info -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">Dados de Jogador</h2>

      <div class="space-y-4">
        <div>
          <label for="skillLevel" class="block text-sm font-medium text-gray-700">
            Nivel (1-10)
          </label>
          <input id="skillLevel" type="number" min="1" max="10"
            [ngModel]="skillLevel()" (ngModelChange)="skillLevel.set($event)" name="skillLevel"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
            placeholder="Ex: 5" />
          <p class="mt-1 text-xs text-gray-400">1 = Iniciante, 10 = Profissional</p>
        </div>

        <div>
          <label for="preferredSide" class="block text-sm font-medium text-gray-700">Lado preferido</label>
          <select id="preferredSide"
            [ngModel]="preferredSide()" (ngModelChange)="preferredSide.set($event)" name="preferredSide"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            <option [ngValue]="null">Sem preferencia</option>
            <option value="left">Esquerda</option>
            <option value="right">Direita</option>
            <option value="both">Ambos</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Role Toggle -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">Papel na Plataforma</h2>

      <div class="flex items-center justify-between">
        <div>
          <p class="font-medium text-gray-900">Organizador de Torneios</p>
          <p class="text-sm text-gray-500">Ativa esta opcao para poderes criar e gerir torneios.</p>
        </div>
        <button type="button" (click)="isOrganizer.set(!isOrganizer())"
          [class]="isOrganizer()
            ? 'bg-blue-600 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2'
            : 'bg-gray-200 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2'">
          <span [class]="isOrganizer()
            ? 'translate-x-5 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out'
            : 'translate-x-0 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out'">
          </span>
        </button>
      </div>
    </div>

    <!-- Submit -->
    <div class="flex justify-end">
      <button type="submit" [disabled]="saving()"
        class="px-6 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer">
        @if (saving()) {
          A guardar...
        } @else {
          Guardar Alteracoes
        }
      </button>
    </div>
  </form>
</div>
